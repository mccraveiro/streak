function getPanel(a){return'<section class="preset-'+a+'" id="panel-'+n++ +'"><i></i></section>'}function wrong(){return arrows[current].removeClass().addClass("icon-cancel"),$(".lives i:nth-child("+lives+")").removeClass().addClass("icon-circle-empty"),clearTimeout(timer),0===--lives?(clearTimeout(timer),panels[0].fadeOut(),panels[1].fadeOut(),$(".lives").fadeOut(),playing=!1,void 0):(game(),void 0)}function evaluate(a){if(playing&&!paused&&allowed&&(a-=37,!(0>a||a>3))){if(a!==expected)return wrong();$("#counter").html(++right),clearTimeout(timer),arrows[current].addClass("correct"),game()}}function difficulty(){press_time-=50,press_time=Math.max(press_time,100),fall_time-=5,fall_time=Math.max(fall_time,200)}function rand(){return~~(4*Math.random())}function game(){if(playing&&!paused){rounds++,difficulty(),allowed=!1;var a=1^current;panels[current].css("z-index",0),panels[a].css("z-index",1),panels[a].removeClass().addClass("preset-"+rounds%5);var b=rand();current=a,arrows[current].removeClass().addClass("icon-"+names[b]+"-open"),expected=b;var c=positions[rand()];panels[current].css({left:c.x,top:c.y}),panels[current].animate({left:0,top:0},fall_time,function(){allowed=!0,panels[1^current].css("top","-100%"),clearTimeout(timer),timer=setTimeout(wrong,press_time)})}}var panels=[null,null],arrows=[null,null],names=["left","up","right","down"],positions=[{x:"100%",y:"0"},{x:"0",y:"100%"},{x:"-100%",y:"0"},{x:"0",y:"-100%"}],rounds=0,right=0,lives=5,fall_time=700,press_time=3e3,timer=null,paused=!1,playing=!1,allowed=!1,expected=0,current=1;$(document).ready(function(){window.addEventListener("focus",function(){paused=!1,game()}),window.addEventListener("blur",function(){paused=!0,clearTimeout(timer)}),panels[0]=$("#panel-0"),panels[1]=$("#panel-1"),arrows[0]=$("#panel-0 i"),arrows[1]=$("#panel-1 i"),W=panels[0].width(),H=panels[0].height(),$("body").keydown(function(a){evaluate(a.keyCode)}),Hammer(document.getElementById("panel-0")).on("swiperight",function(a){console.log(a)}),Hammer(document.getElementById("panel-1")).on("swiperight",function(a){console.log(a)}),$("h1").animate({"margin-top":"10%"},"slow",function(){$(".txt").fadeIn(),$(".txt a").click(function(){$(".lives i").removeClass().addClass("icon-circle"),$("h2").html("0"),$("h2").fadeIn(),$(".lives").fadeIn(),fall_time=700,press_time=3e3,rounds=0,lives=5,right=0,panels[0].fadeIn(),panels[1].fadeIn(),panels[0].css({top:"-100%",left:"-100%"}),panels[1].css({top:"-100%",left:"-100%"}),playing=!0,game()})})});